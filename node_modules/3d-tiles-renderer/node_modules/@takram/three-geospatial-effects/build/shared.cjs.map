{"version":3,"file":"shared.cjs","sources":["../src/shaders/depthEffect.frag?raw","../src/DepthEffect.ts","../src/shaders/ditheringEffect.frag?raw","../src/DitheringEffect.ts","../src/setupMaterialsForGeometryPass.ts","../src/GeometryPass.ts","../src/shaders/downsampleThreshold.frag?raw","../src/shaders/downsampleThreshold.vert?raw","../src/DownsampleThresholdMaterial.ts","../src/shaders/lensFlareFeatures.frag?raw","../src/shaders/lensFlareFeatures.vert?raw","../src/LensFlareFeaturesMaterial.ts","../src/shaders/lensFlareEffect.frag?raw","../src/LensFlareEffect.ts","../src/shaders/normalEffect.frag?raw","../src/NormalEffect.ts"],"sourcesContent":null,"names":["fragmentShader$5","depthEffectOptionsDefaults","BlendFunction","DepthEffect","Effect","options","blendFunction","useTurbo","near","far","resolveIncludes","fragmentShader","depth","turbo","EffectAttribute","Uniform","value","__decorateClass","define","fragmentShader$4","ditheringOptionsDefaults","DitheringEffect","SETUP","injectNormal","shader","vertexShader","injectGBuffer","type","outputBuffer1","packing","setupMaterialsForGeometryPass","ShaderLib","GeometryPass","RenderPass","inputBuffer","scene","camera","overrideMaterial","HalfFloatType","renderer","outputBuffer","deltaTime","stencilTest","width","height","fragmentShader$3","vertexShader$1","downsampleThresholdMaterialParametersDefaults","DownsampleThresholdMaterial","ShaderMaterial","params","thresholdLevel","thresholdRange","others","NoBlending","Vector2","fragmentShader$2","lensFlareFeaturesMaterialParametersDefaults","LensFlareFeaturesMaterial","ghostAmount","haloAmount","chromaticAberration","fragmentShader$1","lensFlareEffectOptionsDefaults","Resolution","LensFlareEffect","resolutionScale","resolutionX","resolutionY","intensity","WebGLRenderTarget","ShaderPass","MipmapBlurPass","KawaseBlurPass","KernelSize","alpha","frameBufferType","baseWidth","baseHeight","resolution","normalEffectOptionsDefaults","NormalEffect","normalBuffer","octEncoded","reconstructFromDepth","transform","Matrix4","uniforms","projectionMatrix","inverseProjectionMatrix"],"mappings":"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"}