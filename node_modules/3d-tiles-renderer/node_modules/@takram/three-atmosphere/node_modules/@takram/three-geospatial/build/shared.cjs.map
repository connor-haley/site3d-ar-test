{"version":3,"file":"shared.cjs","sources":["../src/helpers/projectOnEllipsoidSurface.ts","../src/Ellipsoid.ts","../src/EllipsoidGeometry.ts","../src/Geodetic.ts"],"sourcesContent":null,"names":["vectorScratch","Vector3","projectOnEllipsoidSurface","position","reciprocalRadiiSquared","result","options","x","y","z","rx","ry","rz","x2","y2","z2","normSquared","ratio","intersection","gradient","lambda","correction","sx","sy","sz","error","sx2","sy2","sz2","sx3","sy3","sz3","vectorScratch1","vectorScratch2","vectorScratch3","_Ellipsoid","__publicField","east","north","up","Matrix4","ray","reciprocalRadii","p","d","p2","d2","pd","discriminant","Q","t1","t2","t","surfacePosition","radius","xySquared","normal","Ellipsoid","EllipsoidGeometry","BufferGeometry","radii","longitudeSegments","latitudeSegments","elementCount","vertex","vertices","normals","uvs","grid","indices","vertexIndex","uvIndex","rowIndex","rowIndices","v","phi","uOffset","u","theta","a","b","c","BufferAttribute","source","_Geodetic","longitude","latitude","height","other","value","projection","ellipsoid","radiiSquared","cosLatitude","array","offset","Geodetic"],"mappings":"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"}